import { ChangeDetectionStrategy, Component, HostBinding, Inject, Input, ViewChildren } from '@angular/core';
import { IGX_GRID_BASE } from '../common/grid.interface';
import { IgxGridHeaderRowComponent } from '../headers/grid-header-row.component';
import { IgxHeaderGroupWidthPipe, IgxHeaderGroupStylePipe } from '../headers/pipes';
import { IgxIconComponent } from '../../icon/icon.component';
import { NgClass, NgFor, NgStyle } from '@angular/common';
import { IgxPivotRowDimensionContentComponent } from './pivot-row-dimension-content.component';
import { IgxPivotGridHorizontalRowCellMerging } from './pivot-grid.pipes';
import * as i0 from "@angular/core";
/**
 *
 * For all intents & purposes treat this component as what a <thead> usually is in the default <table> element.
 *
 * This container holds the pivot grid header elements and their behavior/interactions.
 *
 * @hidden @internal
 */
export class IgxPivotRowDimensionMrlRowComponent extends IgxGridHeaderRowComponent {
    get rowsTemplate() {
        return this.getRowMRLTemplate(true, this.rowGroup);
    }
    get colsTemplate() {
        return this.getRowMRLTemplate(false, this.rowGroup);
    }
    constructor(grid, ref, injector, envInjector, cdr, viewRef) {
        super(ref, cdr);
        this.grid = grid;
        this.injector = injector;
        this.envInjector = envInjector;
        this.viewRef = viewRef;
        this.pivotDim = true;
        this.mrlBlock = true;
    }
    getRowMRLTemplate(forRows, rows) {
        if (forRows) {
            return `repeat(${rows.length},1fr)`;
        }
        else if (this.grid.visibleRowDimensions && this.grid.dimensionDataColumns) {
            const res = [];
            this.grid.visibleRowDimensions.forEach(dim => {
                res.push(this.grid.rowDimensionWidth(dim));
            });
            return res.join(' ');
        }
    }
    rowDimensionWidthCombined(dims) {
        let resWidth = 0;
        for (const dim of (dims || [])) {
            const rowDimWidth = this.grid.rowDimensionWidth(dim);
            if (rowDimWidth === 'fit-content') {
                return -1;
            }
            else {
                resWidth += parseFloat(rowDimWidth);
            }
        }
        return resWidth;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.4", ngImport: i0, type: IgxPivotRowDimensionMrlRowComponent, deps: [{ token: IGX_GRID_BASE }, { token: i0.ElementRef }, { token: i0.Injector }, { token: i0.EnvironmentInjector }, { token: i0.ChangeDetectorRef }, { token: i0.ViewContainerRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.4", type: IgxPivotRowDimensionMrlRowComponent, isStandalone: true, selector: "igx-pivot-row-dimension-mrl-row", inputs: { rowIndex: "rowIndex", rowGroup: "rowGroup", groupedData: "groupedData" }, host: { properties: { "class.igx-grid__tbody-pivot-dimension": "this.pivotDim", "class.igx-grid__mrl-block": "this.mrlBlock", "style.grid-template-rows": "this.rowsTemplate", "style.grid-template-columns": "this.colsTemplate" } }, viewQueries: [{ propertyName: "contentCells", predicate: IgxPivotRowDimensionContentComponent, descendants: true }], usesInheritance: true, ngImport: i0, template: "<ng-template ngFor let-cell let-cellIndex=\"index\" [ngForOf]=\"rowGroup\n    | pivotGridHorizontalRowCellMerging:grid.pivotConfiguration:grid.pipeTrigger\">\n    <igx-pivot-row-dimension-content role=\"row\" class=\"igx-grid-thead\"\n        [grid]=\"grid\"\n        [dimension]=\"cell.rootDimension\"\n        [rootDimension]=\"cell.rootDimension\"\n        [rowIndex]=\"rowIndex\"\n        [colIndex]=\"cellIndex\"\n        [rowData]=\"cell.records[0]\"\n        [width]=\"rowDimensionWidthCombined(cell.dimensions)\"\n        [layout]=\"{\n            rowStart: cell.rowStart,\n            rowEnd: cell.rowStart + cell.rowSpan,\n            colStart: cell.colStart,\n            colEnd: cell.colStart + cell.colSpan,\n            columnVisibleIndex: cellIndex\n        }\">\n    </igx-pivot-row-dimension-content>\n</ng-template>\n", dependencies: [{ kind: "directive", type: NgFor, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "component", type: IgxPivotRowDimensionContentComponent, selector: "igx-pivot-row-dimension-content", inputs: ["rowIndex", "colIndex", "layout", "dimension", "rootDimension", "rowData"] }, { kind: "pipe", type: IgxPivotGridHorizontalRowCellMerging, name: "pivotGridHorizontalRowCellMerging" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.4", ngImport: i0, type: IgxPivotRowDimensionMrlRowComponent, decorators: [{
            type: Component,
            args: [{ changeDetection: ChangeDetectionStrategy.OnPush, selector: 'igx-pivot-row-dimension-mrl-row', standalone: true, imports: [NgClass, NgStyle, NgFor, IgxIconComponent, IgxHeaderGroupWidthPipe, IgxHeaderGroupStylePipe,
                        IgxPivotRowDimensionContentComponent, IgxPivotGridHorizontalRowCellMerging], template: "<ng-template ngFor let-cell let-cellIndex=\"index\" [ngForOf]=\"rowGroup\n    | pivotGridHorizontalRowCellMerging:grid.pivotConfiguration:grid.pipeTrigger\">\n    <igx-pivot-row-dimension-content role=\"row\" class=\"igx-grid-thead\"\n        [grid]=\"grid\"\n        [dimension]=\"cell.rootDimension\"\n        [rootDimension]=\"cell.rootDimension\"\n        [rowIndex]=\"rowIndex\"\n        [colIndex]=\"cellIndex\"\n        [rowData]=\"cell.records[0]\"\n        [width]=\"rowDimensionWidthCombined(cell.dimensions)\"\n        [layout]=\"{\n            rowStart: cell.rowStart,\n            rowEnd: cell.rowStart + cell.rowSpan,\n            colStart: cell.colStart,\n            colEnd: cell.colStart + cell.colSpan,\n            columnVisibleIndex: cellIndex\n        }\">\n    </igx-pivot-row-dimension-content>\n</ng-template>\n" }]
        }], ctorParameters: () => [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [IGX_GRID_BASE]
                }] }, { type: i0.ElementRef }, { type: i0.Injector }, { type: i0.EnvironmentInjector }, { type: i0.ChangeDetectorRef }, { type: i0.ViewContainerRef }], propDecorators: { pivotDim: [{
                type: HostBinding,
                args: ['class.igx-grid__tbody-pivot-dimension']
            }], mrlBlock: [{
                type: HostBinding,
                args: ['class.igx-grid__mrl-block']
            }], rowsTemplate: [{
                type: HostBinding,
                args: ['style.grid-template-rows']
            }], colsTemplate: [{
                type: HostBinding,
                args: ['style.grid-template-columns']
            }], rowIndex: [{
                type: Input
            }], rowGroup: [{
                type: Input
            }], groupedData: [{
                type: Input
            }], contentCells: [{
                type: ViewChildren,
                args: [IgxPivotRowDimensionContentComponent]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGl2b3Qtcm93LWRpbWVuc2lvbi1tcmwtcm93LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2lnbml0ZXVpLWFuZ3VsYXIvc3JjL2xpYi9ncmlkcy9waXZvdC1ncmlkL3Bpdm90LXJvdy1kaW1lbnNpb24tbXJsLXJvdy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZ25pdGV1aS1hbmd1bGFyL3NyYy9saWIvZ3JpZHMvcGl2b3QtZ3JpZC9waXZvdC1yb3ctZGltZW5zaW9uLW1ybC1yb3cuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILHVCQUF1QixFQUV2QixTQUFTLEVBR1QsV0FBVyxFQUNYLE1BQU0sRUFFTixLQUFLLEVBRUwsWUFBWSxFQUVmLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxhQUFhLEVBQWlCLE1BQU0sMEJBQTBCLENBQUM7QUFDeEUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFFakYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDN0QsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDMUQsT0FBTyxFQUFFLG9DQUFvQyxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDL0YsT0FBTyxFQUFFLG9DQUFvQyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7O0FBRTFFOzs7Ozs7O0dBT0c7QUFTSCxNQUFNLE9BQU8sbUNBQW9DLFNBQVEseUJBQXlCO0lBUTlFLElBQ1csWUFBWTtRQUNuQixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFFB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WyJpbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgIENvbXBvbmVudCxcbiAgICBFbGVtZW50UmVmLFxuICAgIEVudmlyb25tZW50SW5qZWN0b3IsXG4gICAgSG9zdEJpbmRpbmcsXG4gICAgSW5qZWN0LFxuICAgIEluamVjdG9yLFxuICAgIElucHV0LFxuICAgIFF1ZXJ5TGlzdCxcbiAgICBWaWV3Q2hpbGRyZW4sXG4gICAgVmlld0NvbnRhaW5lclJlZlxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElHWF9HUklEX0JBU0UsIFBpdm90R3JpZFR5cGUgfSBmcm9tICcuLi9jb21tb24vZ3JpZC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgSWd4R3JpZEhlYWRlclJvd0NvbXBvbmVudCB9IGZyb20gJy4uL2hlYWRlcnMvZ3JpZC1oZWFkZXItcm93LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBJUGl2b3REaW1lbnNpb24sIElQaXZvdERpbWVuc2lvbkRhdGEsIElQaXZvdEdyaWRSZWNvcmQgfSBmcm9tICcuL3Bpdm90LWdyaWQuaW50ZXJmYWNlJztcbmltcG9ydCB7IElneEhlYWRlckdyb3VwV2lkdGhQaXBlLCBJZ3hIZWFkZXJHcm91cFN0eWxlUGlwZSB9IGZyb20gJy4uL2hlYWRlcnMvcGlwZXMnO1xuaW1wb3J0IHsgSWd4SWNvbkNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2ljb24vaWNvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgTmdDbGFzcywgTmdGb3IsIE5nU3R5bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSWd4UGl2b3RSb3dEaW1lbnNpb25Db250ZW50Q29tcG9uZW50IH0gZnJvbSAnLi9waXZvdC1yb3ctZGltZW5zaW9uLWNvbnRlbnQuY29tcG9uZW50JztcbmltcG9ydCB7IElneFBpdm90R3JpZEhvcml6b250YWxSb3dDZWxsTWVyZ2luZyB9IGZyb20gJy4vcGl2b3QtZ3JpZC5waXBlcyc7XG5cbi8qKlxuICpcbiAqIEZvciBhbGwgaW50ZW50cyAmIHB1cnBvc2VzIHRyZWF0IHRoaXMgY29tcG9uZW50IGFzIHdoYXQgYSA8dGhlYWQ+IHVzdWFsbHkgaXMgaW4gdGhlIGRlZmF1bHQgPHRhYmxlPiBlbGVtZW50LlxuICpcbiAqIFRoaXMgY29udGFpbmVyIGhvbGRzIHRoZSBwaXZvdCBncmlkIGhlYWRlciBlbGVtZW50cyBhbmQgdGhlaXIgYmVoYXZpb3IvaW50ZXJhY3Rpb25zLlxuICpcbiAqIEBoaWRkZW4gQGludGVybmFsXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIHNlbGVjdG9yOiAnaWd4LXBpdm90LXJvdy1kaW1lbnNpb24tbXJsLXJvdycsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3Bpdm90LXJvdy1kaW1lbnNpb24tbXJsLXJvdy5jb21wb25lbnQuaHRtbCcsXG4gICAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgICBpbXBvcnRzOiBbTmdDbGFzcywgTmdTdHlsZSwgTmdGb3IsIElneEljb25Db21wb25lbnQsIElneEhlYWRlckdyb3VwV2lkdGhQaXBlLCBJZ3hIZWFkZXJHcm91cFN0eWxlUGlwZSxcbiAgICAgICAgSWd4UGl2b3RSb3dEaW1lbnNpb25Db250ZW50Q29tcG9uZW50LCBJZ3hQaXZvdEdyaWRIb3Jpem9udGFsUm93Q2VsbE1lcmdpbmddXG59KVxuZXhwb3J0IGNsYXNzIElneFBpdm90Um93RGltZW5zaW9uTXJsUm93Q29tcG9uZW50IGV4dGVuZHMgSWd4R3JpZEhlYWRlclJvd0NvbXBvbmVudCB7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkX190Ym9keS1waXZvdC1kaW1lbnNpb24nKVxuICAgIHB1YmxpYyBwaXZvdERpbSA9IHRydWU7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkX19tcmwtYmxvY2snKVxuICAgIHB1YmxpYyBtcmxCbG9jayA9ICB0cnVlO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5ncmlkLXRlbXBsYXRlLXJvd3MnKVxuICAgIHB1YmxpYyBnZXQgcm93c1RlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJvd01STFRlbXBsYXRlKHRydWUsIHRoaXMucm93R3JvdXApO1xuICAgIH1cblxuICAgIEBIb3N0QmluZGluZygnc3R5bGUuZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zJylcbiAgICBwdWJsaWMgZ2V0IGNvbHNUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSb3dNUkxUZW1wbGF0ZShmYWxzZSwgdGhpcy5yb3dHcm91cCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlbiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyByb3dJbmRleDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQGhpZGRlbiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyByb3dHcm91cDogSVBpdm90R3JpZFJlY29yZFtdO1xuXG4gICAgLyoqXG4gICAgICogQGhpZGRlbiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBncm91cGVkRGF0YTogSVBpdm90R3JpZFJlY29yZFtdW107XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIEBWaWV3Q2hpbGRyZW4oSWd4UGl2b3RSb3dEaW1lbnNpb25Db250ZW50Q29tcG9uZW50KVxuICAgIHB1YmxpYyBjb250ZW50Q2VsbHM6IFF1ZXJ5TGlzdDxJZ3hQaXZvdFJvd0RpbWVuc2lvbkNvbnRlbnRDb21wb25lbnQ+XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgQEluamVjdChJR1hfR1JJRF9CQVNFKSBwdWJsaWMgb3ZlcnJpZGUgZ3JpZDogUGl2b3RHcmlkVHlwZSxcbiAgICAgICAgcmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICAgICAgcHJvdGVjdGVkIGluamVjdG9yOiBJbmplY3RvcixcbiAgICAgICAgcHJvdGVjdGVkIGVudkluamVjdG9yOiBFbnZpcm9ubWVudEluamVjdG9yLFxuICAgICAgICBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBwcm90ZWN0ZWQgdmlld1JlZjogVmlld0NvbnRhaW5lclJlZlxuICAgICkge1xuICAgICAgICBzdXBlcihyZWYsIGNkcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlbiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBwdWJsaWMgcm93RGltZW5zaW9uRGF0YTogSVBpdm90RGltZW5zaW9uRGF0YTtcblxuICAgIHByb3RlY3RlZCBnZXRSb3dNUkxUZW1wbGF0ZShmb3JSb3dzOiBib29sZWFuLCByb3dzOiBJUGl2b3RHcmlkUmVjb3JkW10pIHtcbiAgICAgICAgaWYgKGZvclJvd3MpIHtcbiAgICAgICAgICAgIHJldHVybiBgcmVwZWF0KCR7cm93cy5sZW5ndGh9LDFmcilgO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC52aXNpYmxlUm93RGltZW5zaW9ucyAmJiB0aGlzLmdyaWQuZGltZW5zaW9uRGF0YUNvbHVtbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5ncmlkLnZpc2libGVSb3dEaW1lbnNpb25zLmZvckVhY2goZGltID0+IHtcbiAgICAgICAgICAgICAgICByZXMucHVzaCh0aGlzLmdyaWQucm93RGltZW5zaW9uV2lkdGgoZGltKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAgcmVzLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByb3dEaW1lbnNpb25XaWR0aENvbWJpbmVkKGRpbXM6IElQaXZvdERpbWVuc2lvbltdKSB7XG4gICAgICAgIGxldCByZXNXaWR0aCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZGltIG9mIChkaW1zIHx8IFtdKSkge1xuICAgICAgICAgICAgY29uc3Qgcm93RGltV2lkdGggPSB0aGlzLmdyaWQucm93RGltZW5zaW9uV2lkdGgoZGltKTtcbiAgICAgICAgICAgIGlmIChyb3dEaW1XaWR0aCA9PT0gJ2ZpdC1jb250ZW50Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzV2lkdGggKz0gcGFyc2VGbG9hdChyb3dEaW1XaWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc1dpZHRoO1xuICAgIH1cbn1cbiIsIjxuZy10ZW1wbGF0ZSBuZ0ZvciBsZXQtY2VsbCBsZXQtY2VsbEluZGV4PVwiaW5kZXhcIiBbbmdGb3JPZl09XCJyb3dHcm91cFxuICAgIHwgcGl2b3RHcmlkSG9yaXpvbnRhbFJvd0NlbGxNZXJnaW5nOmdyaWQucGl2b3RDb25maWd1cmF0aW9uOmdyaWQucGlwZVRyaWdnZXJcIj5cbiAgICA8aWd4LXBpdm90LXJvdy1kaW1lbnNpb24tY29udGVudCByb2xlPVwicm93XCIgY2xhc3M9XCJpZ3gtZ3JpZC10aGVhZFwiXG4gICAgICAgIFtncmlkXT1cImdyaWRcIlxuICAgICAgICBbZGltZW5zaW9uXT1cImNlbGwucm9vdERpbWVuc2lvblwiXG4gICAgICAgIFtyb290RGltZW5zaW9uXT1cImNlbGwucm9vdERpbWVuc2lvblwiXG4gICAgICAgIFtyb3dJbmRleF09XCJyb3dJbmRleFwiXG4gICAgICAgIFtjb2xJbmRleF09XCJjZWxsSW5kZXhcIlxuICAgICAgICBbcm93RGF0YV09XCJjZWxsLnJlY29yZHNbMF1cIlxuICAgICAgICBbd2lkdGhdPVwicm93RGltZW5zaW9uV2lkdGhDb21iaW5lZChjZWxsLmRpbWVuc2lvbnMpXCJcbiAgICAgICAgW2xheW91dF09XCJ7XG4gICAgICAgICAgICByb3dTdGFydDogY2VsbC5yb3dTdGFydCxcbiAgICAgICAgICAgIHJvd0VuZDogY2VsbC5yb3dTdGFydCArIGNlbGwucm93U3BhbixcbiAgICAgICAgICAgIGNvbFN0YXJ0OiBjZWxsLmNvbFN0YXJ0LFxuICAgICAgICAgICAgY29sRW5kOiBjZWxsLmNvbFN0YXJ0ICsgY2VsbC5jb2xTcGFuLFxuICAgICAgICAgICAgY29sdW1uVmlzaWJsZUluZGV4OiBjZWxsSW5kZXhcbiAgICAgICAgfVwiPlxuICAgIDwvaWd4LXBpdm90LXJvdy1kaW1lbnNpb24tY29udGVudD5cbjwvbmctdGVtcGxhdGU+XG4iXX0=