export const daysInWeek = 7;
const millisecondsInDay = 86400000;
export function toCalendarDay(date) {
    return date instanceof Date ? CalendarDay.from(date) : date;
}
function checkRollover(original, modified) {
    return original.date !== modified.date
        ? modified.set({ date: 0 })
        : modified;
}
export class CalendarDay {
    /** Constructs and returns the current day. */
    static get today() {
        return CalendarDay.from(new Date());
    }
    /** Constructs a new CalendarDay instance from a Date object. */
    static from(date) {
        return new CalendarDay({
            year: date.getFullYear(),
            month: date.getMonth(),
            date: date.getDate(),
        });
    }
    constructor(args) {
        this._date = new Date(args.year, args.month, args.date ?? 1);
    }
    /** Returns a copy of this instance. */
    clone() {
        return CalendarDay.from(this._date);
    }
    /**
     * Returns a new instance with values replaced.
     */
    set(args) {
        return new CalendarDay({
            year: args.year ?? this.year,
            month: args.month ?? this.month,
            date: args.date ?? this.date,
        });
    }
    add(unit, value) {
        const result = this.clone();
        switch (unit) {
            case "year":
                result._date.setFullYear(result.year + value);
                return checkRollover(this, result);
            case "quarter":
                result._date.setMonth(result.month + 3 * value);
                return checkRollover(this, result);
            case "month":
                result._date.setMonth(result.month + value);
                return checkRollover(this, result);
            case "week":
                result._date.setDate(result.date + 7 * value);
                return result;
            case "day":
                result._date.setDate(result.date + value);
                return result;
            default:
                throw new Error("Invalid interval");
        }
    }
    /** Returns the day of the week (Sunday = 0). */
    get day() {
        return this._date.getDay();
    }
    /** Returns the full year. */
    get year() {
        return this._date.getFullYear();
    }
    /** Returns the month. */
    get month() {
        return this._date.getMonth();
    }
    /** Returns the date */
    get date() {
        return this._date.getDate();
    }
    /** Returns the timestamp since epoch in milliseconds. */
    get timestamp() {
        return this._date.getTime();
    }
    /** Returns the current week number. */
    get week() {
        const firstDay = new CalendarDay({ year: this.year, month: 0 })
            .timestamp;
        const currentDay = (this.timestamp - firstDay + millisecondsInDay) / millisecondsInDay;
        return Math.ceil(currentDay / daysInWeek);
    }
    /** Returns the underlying native date instance. */
    get native() {
        return new Date(this._date);
    }
    /**
     * Whether the current date is a weekend day.
     *
     * @remarks
     * This is naive, since it does not account for locale specifics.
     */
    get weekend() {
        return this.day < 1 || this.day > 5;
    }
    equalTo(value) {
        return this.timestamp === toCalendarDay(value).timestamp;
    }
    greaterThan(value) {
        return this.timestamp > toCalendarDay(value).timestamp;
    }
    lessThan(value) {
        return this.timestamp < toCalendarDay(value).timestamp;
    }
    toString() {
        return `${this.native}`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZ25pdGV1aS1hbmd1bGFyL3NyYy9saWIvY2FsZW5kYXIvY29tbW9uL21vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlCQSxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBQzVCLE1BQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDO0FBRW5DLE1BQU0sVUFBVSxhQUFhLENBQUMsSUFBa0I7SUFDNUMsT0FBTyxJQUFJLFlBQVksSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDaEUsQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLFFBQXFCLEVBQUUsUUFBcUI7SUFDL0QsT0FBTyxRQUFRLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQyxJQUFJO1FBQ2xDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQzNCLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDbkIsQ0FBQztBQUVELE1BQU0sT0FBTyxXQUFXO0lBR3BCLDhDQUE4QztJQUN2QyxNQUFNLEtBQUssS0FBSztRQUNuQixPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRCxnRUFBZ0U7SUFDekQsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFVO1FBQ3pCLE9BQU8sSUFBSSxXQUFXLENBQUM7WUFDbkIsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDeEIsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDdEIsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUU7U0FDdkIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELFlBQVksSUFBdUI7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QUFFLENBQUM7YUFDMUQsU0FBUyxDQUFDO1FBQ2YsTUFBTSxVQUFVLEdBQ1osQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyxHQUFHLGlCQUFpQixDQUFDO1FBQ3hFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELG1EQUFtRDtJQUNuRCxJQUFXLE1BQU07UUFDYixPQUFPLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxJQUFXLE9BQU87UUFDZCxPQUFPLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFTSxPQUFPLENBQUMsS0FBbUI7UUFDOUIsT0FBTyxJQUFJLENBQUMsU0FBUyxLQUFLLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDN0QsQ0FBQztJQUVNLFdBQVcsQ0FBQyxLQUFtQjtRQUNsQyxPQUFPLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUMzRCxDQUFDO0lBRU0sUUFBUSxDQUFDLEtBQW1CO1FBQy9CLE9BQU8sSUFBSSxDQUFDLFNBQVMsR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQzNELENBQUM7SUFFTSxRQUFRO1FBQ1gsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM1QixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWRlZmluaXRpb25zICovXG5leHBvcnQgdHlwZSBEYXlQYXJhbWV0ZXIgPSBDYWxlbmRhckRheSB8IERhdGU7XG5cbmV4cG9ydCB0eXBlIENhbGVuZGFyUmFuZ2VQYXJhbXMgPSB7XG4gICAgc3RhcnQ6IERheVBhcmFtZXRlcjtcbiAgICBlbmQ6IERheVBhcmFtZXRlciB8IG51bWJlcjtcbiAgICB1bml0PzogRGF5SW50ZXJ2YWw7XG59O1xuXG50eXBlIENhbGVuZGFyRGF5UGFyYW1zID0ge1xuICAgIHllYXI6IG51bWJlcjtcbiAgICBtb250aDogbnVtYmVyO1xuICAgIGRhdGU/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBEYXlJbnRlcnZhbCA9IFwieWVhclwiIHwgXCJxdWFydGVyXCIgfCBcIm1vbnRoXCIgfCBcIndlZWtcIiB8IFwiZGF5XCI7XG5cbmV4cG9ydCBjb25zdCBkYXlzSW5XZWVrID0gNztcbmNvbnN0IG1pbGxpc2Vjb25kc0luRGF5ID0gODY0MDAwMDA7XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0NhbGVuZGFyRGF5KGRhdGU6IERheVBhcmFtZXRlcikge1xuICAgIHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSA/IENhbGVuZGFyRGF5LmZyb20oZGF0ZSkgOiBkYXRlO1xufVxuXG5mdW5jdGlvbiBjaGVja1JvbGxvdmVyKG9yaWdpbmFsOiBDYWxlbmRhckRheSwgbW9kaWZpZWQ6IENhbGVuZGFyRGF5KSB7XG4gICAgcmV0dXJuIG9yaWdpbmFsLmRhdGUgIT09IG1vZGlmaWVkLmRhdGVcbiAgICAgICAgPyBtb2RpZmllZC5zZXQoeyBkYXRlOiAwIH0pXG4gICAgICAgIDogbW9kaWZpZWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBDYWxlbmRhckRheSB7XG4gICAgcHJpdmF0ZSBfZGF0ZSE6IERhdGU7XG5cbiAgICAvKiogQ29uc3RydWN0cyBhbmQgcmV0dXJucyB0aGUgY3VycmVudCBkYXkuICovXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdG9kYXkoKSB7XG4gICAgICAgIHJldHVybiBDYWxlbmRhckRheS5mcm9tKG5ldyBEYXRlKCkpO1xuICAgIH1cblxuICAgIC8qKiBDb25zdHJ1Y3RzIGEgbmV3IENhbGVuZGFyRGF5IGluc3RhbmNlIGZyb20gYSBEYXRlIG9iamVjdC4gKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb20oZGF0ZTogRGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IENhbGVuZGFyRGF5KHtcbiAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksXG4gICAgICAgICAgICBkYXRlOiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoYXJnczogQ2FsZW5kYXJEYXlQYXJhbXMpIHtcbiAgICAgICAgdGhpcy5fZGF0ZSA9IG5ldyBEYXRlKGFyZ3MueWVhciwgYXJncy5tb250aCwgYXJncy5kYXRlID8/IDEpO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIGluc3RhbmNlLiAqL1xuICAgIHB1YmxpYyBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIENhbGVuZGFyRGF5LmZyb20odGhpcy5fZGF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBpbnN0YW5jZSB3aXRoIHZhbHVlcyByZXBsYWNlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0KGFyZ3M6IFBhcnRpYWw8Q2FsZW5kYXJEYXlQYXJhbXM+KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsZW5kYXJEYXkoe1xuICAgICAgICAgICAgeWVhcjogYXJncy55ZWFyID8/IHRoaXMueWVhcixcbiAgICAgICAgICAgIG1vbnRoOiBhcmdzLm1vbnRoID8/IHRoaXMubW9udGgsXG4gICAgICAgICAgICBkYXRlOiBhcmdzLmRhdGUgPz8gdGhpcy5kYXRlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkKHVuaXQ6IERheUludGVydmFsLCB2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgc3dpdGNoICh1bml0KSB7XG4gICAgICAgICAgICBjYXNlIFwieWVhclwiOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5fZGF0ZS5zZXRGdWxsWWVhcihyZXN1bHQueWVhciArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tSb2xsb3Zlcih0aGlzLCByZXN1bHQpO1xuICAgICAgICAgICAgY2FzZSBcInF1YXJ0ZXJcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQuX2RhdGUuc2V0TW9udGgocmVzdWx0Lm1vbnRoICsgMyAqIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tSb2xsb3Zlcih0aGlzLCByZXN1bHQpO1xuICAgICAgICAgICAgY2FzZSBcIm1vbnRoXCI6XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kYXRlLnNldE1vbnRoKHJlc3VsdC5tb250aCArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tSb2xsb3Zlcih0aGlzLCByZXN1bHQpO1xuICAgICAgICAgICAgY2FzZSBcIndlZWtcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQuX2RhdGUuc2V0RGF0ZShyZXN1bHQuZGF0ZSArIDcgKiB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIGNhc2UgXCJkYXlcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQuX2RhdGUuc2V0RGF0ZShyZXN1bHQuZGF0ZSArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGludGVydmFsXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIFJldHVybnMgdGhlIGRheSBvZiB0aGUgd2VlayAoU3VuZGF5ID0gMCkuICovXG4gICAgcHVibGljIGdldCBkYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRlLmdldERheSgpO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRoZSBmdWxsIHllYXIuICovXG4gICAgcHVibGljIGdldCB5ZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRoZSBtb250aC4gKi9cbiAgICBwdWJsaWMgZ2V0IG1vbnRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0ZS5nZXRNb250aCgpO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRoZSBkYXRlICovXG4gICAgcHVibGljIGdldCBkYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0ZS5nZXREYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqIFJldHVybnMgdGhlIHRpbWVzdGFtcCBzaW5jZSBlcG9jaCBpbiBtaWxsaXNlY29uZHMuICovXG4gICAgcHVibGljIGdldCB0aW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRlLmdldFRpbWUoKTtcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0aGUgY3VycmVudCB3ZWVrIG51bWJlci4gKi9cbiAgICBwdWJsaWMgZ2V0IHdlZWsoKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IENhbGVuZGFyRGF5KHsgeWVhcjogdGhpcy55ZWFyLCBtb250aDogMCB9KVxuICAgICAgICAgICAgLnRpbWVzdGFtcDtcbiAgICAgICAgY29uc3QgY3VycmVudERheSA9XG4gICAgICAgICAgICAodGhpcy50aW1lc3RhbXAgLSBmaXJzdERheSArIG1pbGxpc2Vjb25kc0luRGF5KSAvIG1pbGxpc2Vjb25kc0luRGF5O1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGN1cnJlbnREYXkgLyBkYXlzSW5XZWVrKTtcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0aGUgdW5kZXJseWluZyBuYXRpdmUgZGF0ZSBpbnN0YW5jZS4gKi9cbiAgICBwdWJsaWMgZ2V0IG5hdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuX2RhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgZGF0ZSBpcyBhIHdlZWtlbmQgZGF5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGlzIG5haXZlLCBzaW5jZSBpdCBkb2VzIG5vdCBhY2NvdW50IGZvciBsb2NhbGUgc3BlY2lmaWNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgd2Vla2VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF5IDwgMSB8fCB0aGlzLmRheSA+IDU7XG4gICAgfVxuXG4gICAgcHVibGljIGVxdWFsVG8odmFsdWU6IERheVBhcmFtZXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAgPT09IHRvQ2FsZW5kYXJEYXkodmFsdWUpLnRpbWVzdGFtcDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ3JlYXRlclRoYW4odmFsdWU6IERheVBhcmFtZXRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAgPiB0b0NhbGVuZGFyRGF5KHZhbHVlKS50aW1lc3RhbXA7XG4gICAgfVxuXG4gICAgcHVibGljIGxlc3NUaGFuKHZhbHVlOiBEYXlQYXJhbWV0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wIDwgdG9DYWxlbmRhckRheSh2YWx1ZSkudGltZXN0YW1wO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubmF0aXZlfWA7XG4gICAgfVxufVxuIl19